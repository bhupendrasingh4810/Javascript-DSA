// const KKR = [
//     // { player: 'P Salt', team: 'KKR', role: 'WK', cp: 9 },
//     { player: 'R Gurbaz', team: 'KKR', role: 'WK', bowlType: 'NONE', cp: 7.5 },
//     { player: 'S Iyer', team: 'KKR', role: 'BAT', bowlType: 'NONE', cp: 8 },
//     { player: 'V Iyer', team: 'KKR', role: 'BAT', bowlType: 'NONE', cp: 8 },
//     { player: 'Rinku', team: 'KKR', role: 'BAT', bowlType: 'NONE', cp: 7.5 },
//     { player: 'A Raghuvanshi', team: 'KKR', role: 'BAT', bowlType: 'NONE', cp: 7 },
//     // { player: 'N Rana', team: 'KKR', role: 'BAT', bowlType: 'NONE', cp: 7 },
//     { player: 'A Russell', team: 'KKR', role: 'AR', bowlType: 'fast', cp: 9 },
//     { player: 'S Narine', team: 'KKR', role: 'AR', bowlType: 'spin', cp: 9 },
//     { player: 'Ramandeep', team: 'KKR', role: 'AR', bowlType: 'NONE', cp: 6.5 },
//     { player: 'H Rana', team: 'KKR', role: 'BOWL', bowlType: 'fast', cp: 7.5 },
//     { player: 'V Chakravarthy', team: 'KKR', role: 'BOWL', bowlType: 'spin', cp: 8.5 },
//     { player: 'M Starc', team: 'KKR', role: 'BOWL', bowlType: 'fast', cp: 8 },
//     // { player: 'V Arora', team: 'KKR', role: 'BOWL', bowlType: 'fast', cp: 6.5 },
//     // { player: 'U Yadav', team: 'KKR', role: 'BOWL', bowlType: 'fast', cp: 6.5 },
// ]
const RR = [
    { player: 'S Samson', team: 'RR', role: 'WK', bowlType: 'NONE', cp: 9 },
    { player: 'Y Chahal', team: 'RR', role: 'BOWL', bowlType: 'SPIN', cp: 9 },
    { player: 'R Parag', team: 'RR', role: 'AR', bowlType: 'SPIN', cp: 8.5 },
    { player: 'T Boult', team: 'RR', role: 'BOWL', bowlType: 'FAST', cp: 8.5 },
    { player: 'Y Jaiswal', team: 'RR', role: 'BAT', bowlType: 'NONE', cp: 8 },
    { player: 'R Ashwin', team: 'RR', role: 'BOWL', bowlType: 'SPIN', cp: 8 },
    { player: 'R Powell', team: 'RR', role: 'BAT', bowlType: 'NONE', cp: 7.5 },
    { player: 'A Khan', team: 'RR', role: 'BOWL', bowlType: 'FAST', cp: 7.5 },
    { player: 'S Sharma', team: 'RR', role: 'BOWL', bowlType: 'FAST', cp: 7.5 },
    { player: 'T Kohler', team: 'RR', role: 'BAT', bowlType: 'NONE', cp: 7 },
    { player: 'S Hetmyer', team: 'RR', role: 'BAT', bowlType: 'NONE', cp: 7 },
    { player: 'D Jurel', team: 'RR', role: 'BAT', bowlType: 'NONE', cp: 6.5 },
    // { player: 'N Burger', team: 'RR', role: 'BOWL', bowlType: 'FAST', cp: 7 },
    // { player: 'J Buttler', team: 'RR', role: 'BAT', bowlType: 'NONE', cp: 8.5 },
    // { player: 'S Dubey', team: 'RR', role: 'BAT', bowlType: 'NONE', cp: 5.5 },
]
const SRH = [
    { player: 'H Klassen', team: 'SRH', role: 'WK', bowlType: 'NONE', cp: 9 },
    { player: 'T Head', team: 'SRH', role: 'BAT', bowlType: 'NONE', cp: 9 },
    { player: 'A Sharma', team: 'SRH', role: 'BAT', bowlType: 'NONE', cp: 8.5 },
    { player: 'P Cummins', team: 'SRH', role: 'BOWL', bowlType: 'FAST', cp: 8.5 },
    { player: 'T Natrajan', team: 'SRH', role: 'BOWL', bowlType: 'FAST', cp: 8.5 },
    { player: 'B Kumar', team: 'SRH', role: 'BOWL', bowlType: 'FAST', cp: 8 },
    { player: 'Nitesh Reddy', team: 'SRH', role: 'AR', bowlType: 'FAST', cp: 7.5 },
    { player: 'R Tripathi', team: 'SRH', role: 'BAT', bowlType: 'NONE', cp: 7 },
    { player: 'A Samad', team: 'SRH', role: 'BAT', bowlType: 'NONE', cp: 6.5 },
    { player: 'S Ahmed', team: 'SRH', role: 'AR', bowlType: 'SPIN', cp: 6.5 },
    { player: 'V Viyaskanth', team: 'SRH', role: 'BOWL', bowlType: 'SPIN', cp: 5.5 },
    // { player: 'J Unadkat', team: 'SRH', role: 'BOWL', bowlType: 'FAST', cp: 7 },
    // { player: 'Sanvir', team: 'SRH', role: 'AR', bowlType: 'FAST', cp: 5.5 },
    // { player: 'M Agarwal', team: 'SRH', role: 'BAT', bowlType: 'NONE', cp: 7.5 },
]
const CSK = []
const RCB = []
// const DC = [
//     { player: 'R Pant', team: 'DC', role: 'WK', bowlType: 'NONE', cp: 8.5 },
//     { player: 'McGurk', team: 'DC', role: 'BAT', bowlType: 'NONE', cp: 8 },
//     { player: 'D Warner', team: 'DC', role: 'BAT', bowlType: 'NONE', cp: 8 },
//     { player: 'S Hope', team: 'DC', role: 'BAT', bowlType: 'NONE', cp: 7 },
//     { player: 'A Porel', team: 'DC', role: 'BAT', bowlType: 'NONE', cp: 6.5 },
//     { player: 'A Patel', team: 'DC', role: 'AR', bowlType: 'SPIN', cp: 8.5 },
//     { player: 'K Ahmed', team: 'DC', role: 'BOWL', bowlType: 'FAST', cp: 8 },
//     { player: 'R Salam', team: 'DC', role: 'BOWL', bowlType: 'FAST', cp: 5.5 },
//     { player: 'M Kumar', team: 'DC', role: 'BOWL', bowlType: 'FAST', cp: 7.5 },
//     { player: 'I Sharma', team: 'DC', role: 'BOWL', bowlType: 'FAST', cp: 7.5 },
//     { player: 'K Yadav', team: 'DC', role: 'BOWL', bowlType: 'SPIN', cp: 9 },
// ]
// const LSG = [
//     { player: 'L Rahul', team: 'LSG', role: 'WK', bowlType: 'NONE', cp: 9 },
//     { player: 'N Pooran', team: 'LSG', role: 'BAT', bowlType: 'NONE', cp: 8.5 },
//     { player: 'D Kock', team: 'LSG', role: 'BAT', bowlType: 'NONE', cp: 7.5 },
//     { player: 'D Hooda', team: 'LSG', role: 'BAT', bowlType: 'NONE', cp: 7 },
//     { player: 'A Badoni', team: 'LSG', role: 'BAT', bowlType: 'NONE', cp: 6.5 },
//     { player: 'M Stoinis', team: 'LSG', role: 'AR', bowlType: 'FAST', cp: 8.5 },
//     { player: 'K Pandya', team: 'LSG', role: 'AR', bowlType: 'SPIN', cp: 7.5 },
//     // { player: 'K Gowtham', team: 'LSG', role: 'AR', bowlType: 'SPIN', cp: 6 },
//     { player: 'A Khan', team: 'LSG', role: 'AR', bowlType: 'FAST', cp: 6 },
//     { player: 'N-ul-Haq', team: 'LSG', role: 'BOWL', bowlType: 'FAST', cp: 7 },
//     { player: 'Y Thakur', team: 'LSG', role: 'BOWL', bowlType: 'FAST', cp: 6.5 },
//     { player: 'R Bishnoi', team: 'LSG', role: 'BOWL', bowlType: 'SPIN', cp: 7.5 },
//     { player: 'M Khan', team: 'LSG', role: 'BOWL', bowlType: 'FAST', cp: 7.5 },
// ]
// const MI = [
//     {player: 'I Kishan', team: 'MI', role: 'WK', bowlType: 'NONE', cp: 7.5},
//     {player: 'R Sharma', team: 'MI', role: 'BAT', bowlType: 'NONE', cp: 8.5},
//     {player: 'T Varma', team: 'MI', role: 'BAT', bowlType: 'NONE', cp: 8.5},
//     {player: 'S Yadav', team: 'MI', role: 'BAT', bowlType: 'NONE', cp: 9},
//     {player: 'T David', team: 'MI', role: 'BAT', bowlType: 'NONE', cp: 7.5},
//     {player: 'N Wadhera', team: 'MI', role: 'BAT', bowlType: 'NONE', cp: 7},
//     {player: 'N Dhir', team: 'MI', role: 'BAT', bowlType: 'NONE', cp: 6},
//     {player: 'H Pandya', team: 'MI', role: 'AR', bowlType: 'FAST', cp: 8},
//     {player: 'J Bumrah', team: 'MI', role: 'BOWL', bowlType: 'FAST', cp: 9},
//     {player: 'P Chawla', team: 'MI', role: 'BOWL', bowlType: 'SPIN', cp: 7.5},
//     {player: 'N Thushara', team: 'MI', role: 'BOWL', bowlType: 'FAST', cp: 6.5},
//     {player: 'A Kamboj', team: 'MI', role: 'BOWL', bowlType: 'FAST', cp: 6},
//     // {player: 'G Coetzee', team: 'MI', role: 'BOWL', bowlType: 'FAST', cp: 8},
// ]
// const PBKS = [
//     { player: 'H Patel', team: 'PBKS', role: 'BOWL', bowlType: 'FAST', cp: 9 },
//     // { player: 'S Curran', team: 'PBKS', role: 'AR', bowlType: 'FAST', cp: 8.5 },
//     // { player: 'J Bairstow', team: 'PBKS', role: 'BAT', bowlType: 'NONE', cp: 8 },
//     { player: 'A Singh', team: 'PBKS', role: 'BOWL', bowlType: 'FAST', cp: 8 },
//     { player: 'S Singh', team: 'PBKS', role: 'BAT', bowlType: 'NONE', cp: 8 },
//     { player: 'R Chahar', team: 'PBKS', role: 'BOWL', bowlType: 'SPIN', cp: 7.5 },
//     { player: 'R Chahar', team: 'PBKS', role: 'BOWL', bowlType: 'SPIN', cp: 7.5 },
//     { player: 'N Ellis', team: 'PBKS', role: 'BOWL', bowlType: 'FAST', cp: 7 },
//     { player: 'P Singh', team: 'PBKS', role: 'BAT', bowlType: 'NONE', cp: 7 },
//     { player: 'R Rossouw', team: 'PBKS', role: 'BAT', bowlType: 'NONE', cp: 7 },
//     { player: 'J Sharma', team: 'PBKS', role: 'BAT', bowlType: 'NONE', cp: 6.5 },
//     { player: 'A Sharma', team: 'PBKS', role: 'BAT', bowlType: 'NONE', cp: 6.5 },
//     { player: 'R Dhawan', team: 'PBKS', role: 'AR', bowlType: 'FAST', cp: 6.5 },
//     { player: 'H Brar', team: 'PBKS', role: 'BOWL', bowlType: 'SPIN', cp: 6.5 },
//     { player: 'A Taide', team: 'PBKS', role: 'BAT', bowlType: 'NONE', cp: 6 },
//     // { player: 'V Kaverappa', team: 'PBKS', role: 'BOWL', bowlType: 'FAST', cp: 5.5 },
// ]
// const GT = [
//     { player: 'M Wade', team: 'GT', role: 'WK', bowlType: 'NONE', cp: 6 },
//     { player: 'S Gill', team: 'GT', role: 'BAT', bowlType: 'NONE', cp: 8.5 },
//     { player: 'S Sudarshan', team: 'GT', role: 'BAT', bowlType: 'NONE', cp: 9 },
//     { player: 'D Miller', team: 'GT', role: 'BAT', bowlType: 'NONE', cp: 8 },
//     // { player: 'R Tewatia', team: 'GT', role: 'AR', bowlType: 'spin', cp: 7 },
//     { player: 'S Khan', team: 'GT', role: 'AR', bowlType: 'spin', cp: 7 },
//     { player: 'R Khan', team: 'GT', role: 'BOWL', bowlType: 'spin', cp: 9 },
//     { player: 'M Sharma', team: 'GT', role: 'BOWL', bowlType: 'fast', cp: 7 },
//     { player: 'N Ahmed', team: 'GT', role: 'BOWL', bowlType: 'fast', cp: 7 },
//     { player: 'S Warrier', team: 'GT', role: 'BOWL', bowlType: 'fast', cp: 6.5 },
//     { player: 'K Tyagi', team: 'GT', role: 'BOWL', bowlType: 'fast', cp: 5.5 },
// ];

const allPlayer = [
    ...SRH,
    ...RR
];

const result = [];

const combinationsUtil = (arr, data, start, end, index, r) => {
    // console.log(data, start, end, index, r)
    if (index === r) {
        result.push(data.slice(0, r))
        // console.log(data.slice(0, r).join(','));
        // console.log(data.slice(0, r));
        return;
    }

    for (let i = start; i <= end && end - i + 1 >= r - index; i++) {
        data[index] = arr[i];
        combinationsUtil(arr, data, i + 1, end, index + 1, r);
    }
}

const combinations = async (arr, n, r) => {
    const data = new Array(r);
    await combinationsUtil(arr, data, 0, n - 1, 0, r);

    const teamWithCreditLessThan90 = result.filter(element => {
        const creditPoint = element.reduce((acc, item) => {
            return acc + item.cp;
        }, 0);
        return creditPoint > 85 && creditPoint < 90;
    });

    const has2PlayerWith9CP = teamWithCreditLessThan90.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.cp == 9 ? 1 : 0);
        }, 0);
        return count == 2;
    });

    const has2PlayerWith85CP = has2PlayerWith9CP.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.cp == 8.5 ? 1 : 0);
        }, 0);
        return count == 3;
    });

    const has2PlayerWith8CP = has2PlayerWith85CP.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.cp == 8 ? 1 : 0);
        }, 0);
        return count == 1;
    });

    const has2PlayerWith75CP = has2PlayerWith8CP.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.cp == 7.5 ? 1 : 0);
        }, 0);
        return count == 2;
    });

    const has2PlayerWith7CP = has2PlayerWith75CP.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.cp == 7 ? 1 : 0);
        }, 0);
        return count == 2;
    });

    const has2PlayerWith65CP = has2PlayerWith7CP.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.cp == 6.5 ? 1 : 0);
        }, 0);
        return count == 1;
    });

    // const has1PlayerWith6CP = has2PlayerWith65CP.filter(element => {
    //     const count = element.reduce((acc, item) => {
    //         return acc + (item.cp == 6 ? 1 : 0);
    //     }, 0);
    //     return count == 1;
    // });

    // const has1PlayerWith55CP = has2PlayerWith65CP.filter(element => {
    //     const count = element.reduce((acc, item) => {
    //         return acc + (item.cp == 5.5 ? 1 : 0);
    //     }, 0);
    //     return count == 1;
    // });

    // const hasLSG6Players = has1PlayerWith6CP.filter(element => {
    //     const count = element.reduce((acc, item) => {
    //         return acc + (item.team === 'LSG' ? 1 : 0);
    //     }, 0);
    //     return count == 6;
    // });

    const has4Bowlers = has2PlayerWith65CP.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.role === 'BOWL' ? 1 : 0);
        }, 0);
        return count == 4;
    });

    const hasOnly2AR = has4Bowlers.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.role === 'AR' ? 1 : 0);
        }, 0);
        return count == 2;
    });

    const hasWK = hasOnly2AR.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (item.role === 'WK' ? 1 : 0);
        }, 0);
        return count == 1;
    });

    const hasRequiredPlayer = hasWK.filter(element => {
        const count = element.reduce((acc, item) => {
            return acc + (['T Head', 'P Cummins', 'T Natrajan', 'Y Jaiswal'].includes(item.player) ? 1 : 0);
        }, 0);
        return count == 4;
    });

    const deleteBowlType = hasRequiredPlayer.map((element) => element = element.map(({ bowlType, ...rest }) => rest))

    const sortedTeam = deleteBowlType.map(element => element.sort((player1, player2) => {
        if (player1.cp > player2.cp) return -1
        if (player1.cp < player2.cp) return 1
        return 0
    }))

    console.log(sortedTeam);
}

const n = allPlayer.length;
const r = 11;
// console.log(`Combinations of ${r} elements from array [${allPlayer}]:`);
combinations(allPlayer, n, r);

